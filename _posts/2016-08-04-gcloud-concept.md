---
layout: post
title:  "Google Cloud Concept"
date:   2016-08-04 23:50:00 +0900
tags: [google cloud]
---

## 소개

### 클라우드 플랫폼 리소스

클라우드 플랫폼은 전세계 구글 데이터센터에 존재하는 컴퓨터, 하드 디스크 드라이브와 같은 물리적 장비와 Virtual machines(VMs)와 같은 가상 리소스들로 구성되어 있다. 각 데이터 센터는 세계의 특정 지역에 위치한다. 미국(Central US), 유럽(Western Europe), 아시아(East Asia)의 각 Region들은 region 안에 서로 다른 곳에 위치한 zone들의 집합이고, 각 zone들은 region 명과 식별자로 이루어진 이름으로 구분된다. 예를들어 East Asia region의 zone a는 asia-east1-a로 명명된다.

이러한 리소스들의 분산은 몇가지 이점을 제공해주는데 이는 고장날 경우를 대비하여 다중화가 가능하고, 클라이언트들과 가장 가까운 지역의 리소스로부터 사용을 하게 되므로 지연을 줄일 수 있다. 분산을 통해 어떻게 리소스들이 함께 사용될 수 있는지 몇가지 규칙들을 소개한다.

### 서비스들을 통해 리소스에 접근

구글 클라우드 내의 소프트웨어와 하드웨어 제품들이 바로 서비스이다. 이 서비스들은 리소스 근원으로의 접근을 제공한다. 상용 클라우드 플랫폼 서비스들은 굉장히 많고 계속 증가하고 있다. 클라우드 플랫폼에서 당신의 웹사이트나 어플리케이션을 개발할 때, 필요로 하는 인프라 환경 내에서 서비스들을 조합하여 원하는 빌드 시나리오로 코드를 추가하는 것이 가능하다.

### 세계의(global), 지방의(regional), 지역의(zonal) 리소스들

어떤 리소스들은 region들과 zone들을 가로질러 어떠한 사용자의 리소스라도 접근이 가능하다. 이 global 리소스들은 미리 구성된 디스크 이미지들과 디스크 스냅샷, 네트워크들을 말한다. 몇가지 리소스들은 같은 region 내에 위치한 리소스들로부터만 접근 가능하다. 이 regional 리소스들은 정적인 외부 IP 주소를 말한다. 그외 다른 리소스들은 오직 같은 zone에 위치한 리소스들에만 접근 가능하고, 이 zonal 리소스들은 VM instance들과 type들, disk들을 말한다.

아래의 다이어그램은 global 범위와 region들, zone들 간의 관계와 몇가지 리소스들을 보여주고있다.

![](http://yonghochoi.github.io/images/google-cloud/regions-zones.png)

하나의 operation 범위는 당신이 사용하는 리소스의 종류에 따라 달라지는데, 예를 들면, 하나의 네트워크를 생성하는 것은 global operation 이다. 네트워크가 global 리소스이기 때문이다. 하나의 IP 주소를 할당하는 것은 regional operation이다. 이는 IP 주소가 regional 리소스이기 때문이다.

클라우드 플랫폼 어플리케이션 최적화를 시작하려면 이 region들과 zone들이 어떻게 통신하는지 이해하는 것이 중요하다. 예를 들어 가능하긴 해도 다른 region에 있는 컴퓨터로 또 다른 region의 디스크에 접속하는 것은 원치 않을 것이다. 왜냐하면 그로 인한 지연은 성능에 매우 좋지 않은 영향을 줄 것이기 때문이다. 다행히도 클라우드 플랫폼은 사용자가 그러한 일을 수행하지 않도록 해주고 있다. 디스크들은 같은 존에 있는 컴퓨터들에서만 접근이 가능하다.

[컴퓨팅과 호스팅 서비스]를 위해 자기가 관리하고자 하는 단계에 따라 어디에 어떻게 리소스를 할당 시킬지에 대한 고려가 필요할 수도 필요 없을 수도 있다.

클라우드 플랫폼의 지리적 분산에 대한 더 많은 정보를 얻으려면, [여기]를 참고한다.

### 프로젝트

할당하고 사용하려는 클라우드 플랫폼 리소스들은 반드시 하나의 프로젝트에 속해야 한다. 프로젝트 내에서 어떻게 빌드가 수행되고 있는지 생각해볼 수 있다. 하나의 프로젝트는 사용자의 어플리케이션의 설정, 권한, 그 밖의 메타 데이터로 구성된다. 하나의 싱글 프로젝트 내의 리소스들은 쉽게 협업할 수 있다. 하나의 싱글 프로젝트가 아닌 경우, 예를 들어, region들과 zone들을 사용하는 경우에 내부 네트워크를 통해 통신하고 있다면 각 프로젝트에 존재하는 리소스들은 프로젝트 경계(region과 zone의 경계)에서 분리되기 때문에 외부 네트워크 연결을 통해서만 서로 연결할 수가 있다. (그만큼 싱글 프로젝트를 사용하는 것보다는 번거롭다.)

각각의 클라우드 플랫폼 프로젝트는

* 사용자가 지정하는 하나의 프로젝트 이름을 갖는다.
* 사용자 또는 클라우드 플랫폼이 제공하는 하나의 projectID를 갖는다.
* 클라우드 플랫폼이 제공하는 프로젝트 번호를 갖는다.

클라우드 플래폼으로 작업을 하면, commaind line과 API 호출 시에 이 정보들을 사용하게 될 것이다.

아래 스크린샷에서는 하나의 프로젝트 이름과 그것이 소유한 ID와 번호를 보여준다.

![](http://yonghochoi.github.io/images/google-cloud/console-ids.png)

이 스크린 샷에서

* *Example Project*가 프로젝트 이름이다.
* *example-id*가 프로젝트 ID이다.
* *123456789012*가 프로젝트 번호이다.

각 프로젝트 ID는 클라우드 플랫폼에서 유일한 값이다. 제거한 프로젝트는 다시 생성할 수 있지만, ID는 다시 사용할 수 없다. 빌링이 활성화 되면 각 프로젝트들은 하나의 빌링 계정으로 사용된다. 여러개의 프로젝트들에서 같은 계정으로 결제된 리소스들을 사용할 수 있다.

프로제트는 네임스페이스의 역할을 한다. 즉, 각 프로젝트 내 모든 리소스들은 반드시 하나의 유일한 이름을 갖지만 분리된 프로젝트들에서도 리소스 이름을 재사용 하도록 할 수 있다. 이 문서에 그 상세 내용이 수록되어 있다.

### 서비스들과 상호작용하는 방법

클라우드 플랫폼에서는 서비스들과 리소스들과 상호작용할 수 있는 세가지 기본적인 방법을 제공한다.

#### 구글 클라우드 플랫폼 콘솔

![](http://yonghochoi.github.io/images/google-cloud/console.png)

구글 클라우드 플랫폼 콘솔은 웹 기반으로 클라우드 플랫폼 프로젝트의 프로젝트들과 리소스들을 관리하는데 사용할 수 있는 GUI를 제공한다.

클라우드 플랫폼 콘솔을 사용할 때, 새로운 프로젝트를 만들거나 이미 존재하는 프로젝트를 선택하고, 해당 프로젝트의 컨텍스트 내에 생성한 리소스들을 사용한다. 여러개의 프로젝트를 생성할 수 있으므로 작업을 분리하는데 프로젝트를 활용할 수 있다. 예를 들어, 모든 팀 구성원들이 다른 프로젝트에서 리소스들에 접근하는 것은 유지하면서 새로 만든 프로젝트에서는 해당 프로젝트에 확실한 팀 구성원들만 리소스 접근이 가능하도록 하여 새로운 프로젝트를 만드는 경우가 있다.

### Command-line 인터페이스

터미널 창에서 작업하는 것을 선호한다면 구글 클라우드 SDK에서 제공하는 gcloud command-line 툴을 사용하면 된다. gcloud 툴은 사용자의 개발 워크플로우와 클라우드 플랫폼 리소스들을 관리하는 데 사용할 수 있다.

### 클라이언트 라이브러리

클라우드 SDK에는 리소스들을 쉽게 생성하고 관리할 수 있는 [클라이언트 라이브러리]들이 포함되어 있다. 클라우드 플랫폼 클라이언트 라이브러리들은 두가지 목적을 위해 공개된 API이다.

* App API들은 Node.js과 Python과 같은 언어에 최적화되어 서비스로의 접근을 제공한다. 이 라이브러리들은 서비스 메타포로 설계가 되어서 서비스들을 통해 더 자연스럽고 더 적은 보일러플레이트 코드로 작업할 수 있다. 또한 [인증과 권한]을 위한 도움 기능을 제공한다.

* Admin API는 리소스 관리를 위한 기능을 제공한다. 예를들어 사용자가 소유한 자동화툴을 통해 빌드하기를 원할 경우 admin API를 사용하면 된다.

또한 구글 맵, 구글 드라이브, 유투브와 같은 제품들의 API에 접근하기 위해 Google API를 사용할 수 있다.

### 가격

클라우드 플랫폼에서 어떻게 가격 책정이 이루어지고 있는지에 대한 구글의 가격 정책을 알고 싶다면 [가격 페이지]를 참고 하고, 각 서비스를 위한 가격에 대해 알고 싶다면 [제품 가격 섹션]을 참고 한다.

클라우드 플랫폼을 사용하는 것에 대한 비용 계산을 도와주는 몇가지 툴을 이용할 수 있다.

* [가격 계산기]는 사용자의 클라우드 플랫폼에서 사용 할 것들에 대한 가격 추산을 빠르고 쉽게 계산할 수 있는 방법을 제공한다. 사용자가 사용하길 원하는 서비스들에 대해 자세한 정보(예를 들면 compute 엔진 인스턴스들의 개수, persistent 디스크들의 개수와 크기 등)를 제공하고, 그에 대한 가격을 추정치를 확인할 수 있다.

* 총 비용을 계산하는 툴인 TCO(total cost of ownership)는 클라우드에서 동작중인 사용자의 compute의 부하에 대한 상대적인 비용(트래픽)을 계산하고 금액에 대한 추정치를 제공한다. 이 툴에서는 조절 가능한 비용 모델에 대해 몇가지 조언을 제공하고 클라우드 플랫폼과 AWS에서의 예상 비용을 비교한다.

[컴퓨팅과 호스팅 서비스]: https://cloud.google.com/docs/overview/cloud-platform-services#computing-hosting
[여기]: https://cloud.google.com/docs/geography-and-regions
[클라이언트 라이브러리]: https://cloud.google.com/sdk/cloud-client-libraries
[인증과 권한]: https://cloud.google.com/docs/authentication
[가격 페이지]: https://cloud.google.com/pricing/#principles
[제품 가격 섹션]: https://cloud.google.com/pricing/#pricing
